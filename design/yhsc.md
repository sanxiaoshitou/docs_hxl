## 用户在线时长设计
判断用户是否在线，及其活跃时长

### 1、使用心跳机制 + Redis缓存
前端每隔30秒发送一次心跳请求。
使用Redis记录最后心跳时间。
判断“当前时间 - 最后心跳时间 < 超时时间”，则视为在线。

优点：实时性好，性能高
缺点：需要前端配合，断线后需要容错逻辑

### 2. 登录登出打点
记录用户登录时间和退出时间
每次会话都记录一条数据

优点：简单、易分析
缺点：断线等异常退出难处理