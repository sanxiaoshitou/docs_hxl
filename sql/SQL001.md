## SQL 语法场景一

### 一、group_concat
场景：把相同name的code拼接到一起
```mysql
 select name,group_concat(code) from `user` group by name;
```

### 二、char_length
场景：需要获取字符的长度，然后根据字符的长度进行排序
```mysql
select * from user where name like '%小明%'
order by char_length(name) asc;
```

### 三、replace
场景1：替换字符
场景2：去除前后空格

### 四、show create table
1、查询表结构
```mysql
desc `order`;
```
2、查询表索引
```mysql
show index from `order`;
```
3、展示ddl，建表语句
```mysql
show create table `order`;
```

### 五、创建临时表，插入数据;
创建一张临时表
将数据插入临时表
```mysql
create table order_2022121819 like `order`;

insert into order_2022121819 select * from `order`;
```

### 六、explain
#### 1、查询sql执行索引情况
```mysql
explain select * from `order` where code='002';
```
#### 2、查询列含义
| 列             | 说明          |
|:--------------|:------------|
| id            | select唯一标识  |
| select_type   | select类型    |
| table         | 表名称         |
| partitions    | 匹配的分区       |
| type          | 连接类型        |
| possible_keys | 可能的索引选择     |
| key           | 实际用到的索引     |
| key_len       | 实际索引长度      |
| ref           | 与索引比较的列     |
| rows          | 预计要检查的行数    |
| filtered      | 按表条件过滤的行百分比 |
| Extra         | 附加信息        |

#### 3、索引常见失效原因
| 常见失效原因                       | 
|:-----------------------------|
| 不满足最左前缀原则                    |   
| 范围索引列没有放最后                   |
| 使用了select                    |
| 索引列上有计算                      |
| 索引列上使用了函数                    |
| 字符类型没加引号                     |
| 用isnull和isnotnull没注意字段是否允许为空 |
| like查询左边有%                   |
| 使用or关键字时没有注意                 |    

### 七、show processlist
1、当前数据库线程执行情况
```mysql
show processlist
```
2、查询列说明

| 列       | 说明                          |
|:--------|:----------------------------|
| id      | 线程id                        |
| User    | sql的账号                      |
| Host    | sql的数据库的ip和端号               |
| db      | 数据库名称                       |
| db      | 数据库名称                       |
| Command | 执行命令,包括:Daemon、Query、Sleep等 |
| Time    | sql所消耗的时间                   |
| State   | 执行状态                        |
| info    | 执行信息,里面可能包含sql信息            |

### 八、mysqldump
数据备份
```mysql
mysqldump -h 127.0.0.1 -u root -p123456 dbname > backup.sql
```






